pipeline {
    agent { label 'cloud-governance' }
    stages {
        stage('Run all policies pre active region') {
            steps {
                withCredentials([string(credentialsId: 'cloud-governance-aws-access-key-id', variable: 'AWS_ACCESS_KEY_ID'),
                                 string(credentialsId: 'cloud-governance-aws-secret-access-key', variable: 'AWS_SECRET_ACCESS_KEY')])
                {
                 sh """podman images ${AWS_ACCESS_KEY_ID}  ${AWS_SECRET_ACCESS_KEY}
                 """
                }
            }
        }
    }
    post {
        failure {
              script {
                msg = "Build error for ${env.JOB_NAME} ${env.BUILD_NUMBER} (${env.BUILD_URL})"

                slackSend message: msg, channel: env.SLACK_CHANNEL
            }
          }
    }
}